<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width" />
		<title>&lt;ex-ample&gt; demo page</title>
	</head>
	<body>

<script type="application/x-ample">
yield "hello";
</script>

<script type="application/x-amplex">
function sleep(ms) { return new Promise(r => setTimeout(r, ms)); }

let num = 1;
while (true) {
	yield num++;
	await sleep(1000);
}
</script>

<script type="module">
import XAmple from "./x-ample.js";

await customElements.whenDefined("x-ample");
let selector = `script[type="application/x-ample"]`;
[...document.querySelectorAll(selector)].forEach(script => {
	let node = XAmple.fromScript(script);
	script.replaceWith(node);
});
</script>

	</body>
</html>
